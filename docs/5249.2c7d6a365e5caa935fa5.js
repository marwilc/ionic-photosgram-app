(self.webpackChunkphotosgram=self.webpackChunkphotosgram||[]).push([[5249],{5249:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Tab3PageModule:()=>f});var o=i(8583),n=i(665),a=i(8739),r=i(3083),s=i(4762),c=i(639),u=i(7660),l=i(9846),p=i(752);const g=function(t){return{"pick-avatar-seleccionado":t}};function m(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-slide"),c.TgZ(1,"ion-img",16),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().selectAvatar(e)}),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(1),c.MGl("src","assets/avatars/",t.img,""),c.Q6J("ngClass",c.VKq(2,g,t.seleccionado))}}function d(t,e){1&t&&(c.TgZ(0,"ion-label"),c._uU(1," Actualizar "),c.qZA())}function Z(t,e){1&t&&c._UZ(0,"ion-spinner")}let h=(()=>{class t{constructor(t,e,i,o){this.userService=t,this.fb=e,this.uiService=i,this.post=o,this.avatars=[{img:"av-1.png",seleccionado:!0},{img:"av-2.png",seleccionado:!1},{img:"av-3.png",seleccionado:!1},{img:"av-4.png",seleccionado:!1},{img:"av-5.png",seleccionado:!1},{img:"av-6.png",seleccionado:!1},{img:"av-7.png",seleccionado:!1},{img:"av-8.png",seleccionado:!1}],this.avatarSlide={slidesPerView:3.5},this.userForm=this.createUserForm(),this.user={},this.updateAttempt=!1}ngOnInit(){this.user=this.userService.getUser(),this.user&&this.patchValueUser()}patchValueUser(){const{avatar:t,email:e,name:i}=this.user;this.userForm.patchValue({avatar:t,email:e,name:i});const o=this.avatars.find(e=>e.img===t);this.selectAvatar(o)}logout(){return(0,s.mG)(this,void 0,void 0,function*(){this.post.pagePost=0,yield this.userService.logout()})}selectAvatar(t){this.avatars.forEach(t=>t.seleccionado=!1),t.seleccionado=!0,this.user.avatar=t.img,this.userForm.get("avatar").setValue(t.img)}updateUser(){return(0,s.mG)(this,void 0,void 0,function*(){if(this.userForm.invalid)return;this.updateAttempt=!0;const{email:t,name:e,avatar:i}=this.userForm.value,o=yield this.userService.updateUser({email:t,name:e,avatar:i});this.uiService.presentToast(o?"Usuario actualizado":"Updated error"),this.updateAttempt=!1})}createUserForm(){return this.fb.group({email:["",n.kI.required],name:["",n.kI.required],avatar:[""]})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(u.K),c.Y36(n.qu),c.Y36(l.F),c.Y36(p.P))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-tab3"]],decls:40,vars:7,consts:[["no-border",""],["slot","end"],["color","danger",3,"click"],["slot","icon-only","name","exit"],["fxLayout","column","fxLayoutAlign","center center"],[1,"top-20"],["size","12",1,"ion-text-center"],[1,"img-avatar",3,"src"],[3,"options"],[4,"ngFor","ngForOf"],[3,"formGroup","ngSubmit"],["name","email","type","email","formControlName","email","required",""],["name","nombre","type","text","formControlName","name","required",""],[1,"ion-text-center"],["type","submit","color","tertiary","shape","round",3,"disabled"],[4,"ngIf"],[1,"pick-avatar",3,"src","ngClass","click"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header",0),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-buttons",1),c.TgZ(3,"ion-button",2),c.NdJ("click",function(){return e.logout()}),c._UZ(4,"ion-icon",3),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(5,"ion-content"),c.TgZ(6,"div",4),c.TgZ(7,"ion-row",5),c.TgZ(8,"ion-col",6),c._UZ(9,"img",7),c.qZA(),c.qZA(),c.TgZ(10,"ion-row",5),c.TgZ(11,"ion-col",6),c.TgZ(12,"ion-label"),c.TgZ(13,"h1"),c._uU(14,"Actualizar perfil"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"ion-row"),c.TgZ(16,"ion-col"),c.TgZ(17,"h3"),c._uU(18,"Seleccione Avatar"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(19,"ion-row"),c.TgZ(20,"ion-col"),c.TgZ(21,"ion-slides",8),c.YNc(22,m,2,4,"ion-slide",9),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"form",10),c.NdJ("ngSubmit",function(){return e.updateUser()}),c.TgZ(24,"ion-row"),c.TgZ(25,"ion-col"),c.TgZ(26,"ion-list"),c.TgZ(27,"ion-item"),c.TgZ(28,"ion-label"),c._uU(29,"Email"),c.qZA(),c._UZ(30,"ion-input",11),c.qZA(),c.TgZ(31,"ion-item"),c.TgZ(32,"ion-label"),c._uU(33,"Nombre"),c.qZA(),c._UZ(34,"ion-input",12),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(35,"ion-row"),c.TgZ(36,"ion-col",13),c.TgZ(37,"ion-button",14),c.YNc(38,d,2,0,"ion-label",15),c.YNc(39,Z,1,0,"ion-spinner",15),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(9),c.Q6J("src","assets/avatars/"+e.user.avatar,c.LSH),c.xp6(12),c.Q6J("options",e.avatarSlide),c.xp6(1),c.Q6J("ngForOf",e.avatars),c.xp6(1),c.Q6J("formGroup",e.userForm),c.xp6(14),c.Q6J("disabled",!e.userForm.valid||e.updateAttempt),c.xp6(1),c.Q6J("ngIf",!e.updateAttempt),c.xp6(1),c.Q6J("ngIf",e.updateAttempt))},directives:[r.Gu,r.sr,r.Sm,r.YG,r.gu,r.W2,r.Nd,r.wI,r.Q$,r.Hr,o.sg,n._Y,n.JL,n.sg,r.q_,r.Ie,r.pK,r.j9,n.JJ,n.u,n.Q7,o.O5,r.A$,r.Xz,o.mk,r.PQ],styles:[".img-avatar[_ngcontent-%COMP%]{width:150px}.top-20[_ngcontent-%COMP%]{margin-top:20px}img[_ngcontent-%COMP%]{width:120px}.pick-avatar[_ngcontent-%COMP%]{width:80px;opacity:.3}.pick-avatar-seleccionado[_ngcontent-%COMP%]{transition:opacity .5s linear;opacity:1!important}"]}),t})();const v=[{path:"",component:h}];let A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[a.Bz.forChild(v)],a.Bz]}),t})(),f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[r.Pc,o.ez,n.u5,a.Bz.forChild([{path:"",component:h}]),A,n.UX]]}),t})()}}]);