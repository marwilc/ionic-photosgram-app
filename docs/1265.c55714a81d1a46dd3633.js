(self.webpackChunkphotosgram=self.webpackChunkphotosgram||[]).push([[1265],{4021:(o,t,n)=>{"use strict";n.d(t,{oK:()=>e,GW:()=>i,dk:()=>s});var e=(()=>(function(o){o.Prompt="PROMPT",o.Camera="CAMERA",o.Photos="PHOTOS"}(e||(e={})),e))(),i=(()=>(function(o){o.Rear="REAR",o.Front="FRONT"}(i||(i={})),i))(),s=(()=>(function(o){o.Uri="uri",o.Base64="base64",o.DataUrl="dataUrl"}(s||(s={})),s))()},1265:(o,t,n)=>{"use strict";n.r(t),n.d(t,{Tab2PageModule:()=>q});var e=n(8583),i=n(665),s=n(3083),r=n(8739),a=n(4762),c=n(8384),l=n(4021);const u=(0,c.fo)("Camera",{web:()=>n.e(4028).then(n.bind(n,4028)).then(o=>new o.CameraWeb)}),g=(0,c.fo)("Geolocation",{web:()=>n.e(3384).then(n.bind(n,3384)).then(o=>new o.GeolocationWeb)});var p=n(639),d=n(752),m=n(9075);function h(o,t){1&o&&p._UZ(0,"ion-icon",15)}function Z(o,t){1&o&&p._UZ(0,"ion-spinner")}function f(o,t){1&o&&p._UZ(0,"ion-spinner",16)}function A(o,t){if(1&o&&(p.TgZ(0,"ion-col",17),p.TgZ(1,"ion-card"),p._UZ(2,"img",18),p.qZA(),p.qZA()),2&o){const o=t.$implicit,n=p.oxw();p.xp6(2),p.Q6J("src",n.sanitize(o),p.LSH)}}const T=[{path:"",component:(()=>{class o{constructor(o,t,n,e){this.postService=o,this.route=t,this.domSanitizer=n,this.platform=e,this.tempImages=[],this.post={coords:null,imgs:[],message:"",position:!1},this.loadingGeo=!1,this.postAttempt=!1}getGeo(){return(0,a.mG)(this,void 0,void 0,function*(){if(!this.post.position)return void(this.post.coords=null);this.loadingGeo=!0;const o=yield g.getCurrentPosition();this.loadingGeo=!1,this.post.coords=`${o.coords.latitude},${o.coords.longitude}`})}createPost(){return(0,a.mG)(this,void 0,void 0,function*(){this.postAttempt=!0,yield this.postService.createPost(this.post),this.post={message:"",coords:null,position:!1},this.tempImages=[],this.postAttempt=!1,this.route.navigateByUrl("/main/tabs/tab1")})}imageProcess(o){return(0,a.mG)(this,void 0,void 0,function*(){const t=yield u.getPhoto(o),n=t.webPath;this.postService.uploadImage(this.platform.is("cordova")?t.path:n),this.tempImages.push(n)})}showCamera(){return(0,a.mG)(this,void 0,void 0,function*(){this.imageProcess({resultType:l.dk.Uri,quality:60,correctOrientation:!0,source:l.oK.Camera})})}openGallery(){return(0,a.mG)(this,void 0,void 0,function*(){this.imageProcess({resultType:l.dk.Uri,quality:60,correctOrientation:!0,source:l.oK.Photos})})}sanitize(o){return this.domSanitizer.bypassSecurityTrustUrl(o)}}return o.\u0275fac=function(t){return new(t||o)(p.Y36(d.P),p.Y36(r.F0),p.Y36(m.H7),p.Y36(s.t4))},o.\u0275cmp=p.Xpm({type:o,selectors:[["app-tab2"]],decls:32,vars:7,consts:[["no-border",""],["slot","end"],["color","primary",3,"disabled","click"],["name","checkmark-outline",4,"ngIf"],[4,"ngIf"],["padding",""],["position","floating"],[3,"ngModel","ngModelChange"],["name","lines-small",4,"ngIf"],["slot","end",3,"ngModel","ngModelChange","ionChange"],["size","6"],["expand","full","shape","round",3,"click"],["slot","start","name","camera"],["slot","start","name","images"],["size","3",4,"ngFor","ngForOf"],["name","checkmark-outline"],["name","lines-small"],["size","3"],[3,"src"]],template:function(o,t){1&o&&(p.TgZ(0,"ion-header",0),p.TgZ(1,"ion-toolbar"),p.TgZ(2,"ion-title"),p._uU(3," Nuevo Post "),p.qZA(),p.TgZ(4,"ion-buttons",1),p.TgZ(5,"ion-button",2),p.NdJ("click",function(){return t.createPost()}),p._uU(6," Compartir "),p.YNc(7,h,1,0,"ion-icon",3),p.YNc(8,Z,1,0,"ion-spinner",4),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(9,"ion-content",5),p.TgZ(10,"ion-list"),p.TgZ(11,"ion-item"),p.TgZ(12,"ion-label",6),p._uU(13," Mensaje"),p.qZA(),p.TgZ(14,"ion-textarea",7),p.NdJ("ngModelChange",function(o){return t.post.message=o}),p.qZA(),p.qZA(),p.TgZ(15,"ion-list"),p.TgZ(16,"ion-item"),p.TgZ(17,"ion-label"),p._uU(18,"Posici\xf3n actual"),p.qZA(),p.YNc(19,f,1,0,"ion-spinner",8),p.TgZ(20,"ion-toggle",9),p.NdJ("ngModelChange",function(o){return t.post.position=o})("ionChange",function(){return t.getGeo()}),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(21,"ion-row"),p.TgZ(22,"ion-col",10),p.TgZ(23,"ion-button",11),p.NdJ("click",function(){return t.showCamera()}),p._UZ(24,"ion-icon",12),p._uU(25," C\xe1mara "),p.qZA(),p.qZA(),p.TgZ(26,"ion-col",10),p.TgZ(27,"ion-button",11),p.NdJ("click",function(){return t.openGallery()}),p._UZ(28,"ion-icon",13),p._uU(29," Galer\xeda "),p.qZA(),p.qZA(),p.qZA(),p.TgZ(30,"ion-row"),p.YNc(31,A,3,1,"ion-col",14),p.qZA(),p.qZA()),2&o&&(p.xp6(5),p.Q6J("disabled",t.post.message.length<1||t.loadingGeo),p.xp6(2),p.Q6J("ngIf",!t.postAttempt),p.xp6(1),p.Q6J("ngIf",t.postAttempt),p.xp6(6),p.Q6J("ngModel",t.post.message),p.xp6(5),p.Q6J("ngIf",t.loadingGeo),p.xp6(1),p.Q6J("ngModel",t.post.position),p.xp6(11),p.Q6J("ngForOf",t.tempImages))},directives:[s.Gu,s.sr,s.wd,s.Sm,s.YG,e.O5,s.W2,s.q_,s.Ie,s.Q$,s.g2,s.j9,i.JJ,i.On,s.ho,s.w,s.Nd,s.wI,s.gu,e.sg,s.PQ,s.PM],styles:[""]}),o})()}];let b=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=p.oAB({type:o}),o.\u0275inj=p.cJS({imports:[[r.Bz.forChild(T)],r.Bz]}),o})(),q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=p.oAB({type:o}),o.\u0275inj=p.cJS({imports:[[s.Pc,e.ez,i.u5,b]]}),o})()}}]);